<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>SuepOS: SuepOS</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">SuepOS
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">SuepOS</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md0"></a></p>
<h1><a class="anchor" id="autotoc_md1"></a>
Shanghai University of Electric Power Operating System</h1>
<p>English | 中文</p>
<hr  />
<h1><a class="anchor" id="autotoc_md3"></a>
SuepOS (Shanghai University of Electric Power OS)</h1>
<p>A simple, educational operating system for RISC-V architecture, designed and developed for teaching purposes at Shanghai University of Electric Power (SUEP). Its goal is to help students understand the core concepts of operating systems, such as boot process, privilege levels, exception handling, memory management, and preemptive multitasking, through hands-on practice with concise and readable code.</p>
<p><b>Architecture</b>: RISC-V 64 (RV64GC) <b>Platform</b>: QEMU <code>virt</code> Machine <b>Status</b>: Under Development (Teaching Use)</p>
<h2><a class="anchor" id="autotoc_md4"></a>
Features</h2>
<ul>
<li><b>Bootloader</b>: Uses OpenSBI as the firmware to bring the system to S-mode.</li>
<li><b>Memory Management</b>: Implements a simple page-based virtual memory system.</li>
<li><b>Exception &amp; Interrupt Handling</b>: Handles exceptions and timer interrupts in S-mode.</li>
<li><b>Multitasking</b>: A minimal preemptive scheduler with simple Round-Robin policy.</li>
<li><b>System Calls</b>: Basic system call interface (e.g., <code>sbi_console_putchar</code> for output).</li>
<li><b>Teaching Focus</b>: Code is heavily commented, modular, and designed for clarity over performance.</li>
</ul>
<h2><a class="anchor" id="autotoc_md5"></a>
Getting Started</h2>
<h3><a class="anchor" id="autotoc_md6"></a>
Prerequisites</h3>
<ul>
<li>A RISC-V 64 GCC toolchain (e.g., <code>riscv64-unknown-elf-gcc</code>)</li>
<li>QEMU system emulator for RISC-V (e.g., <code>qemu-system-riscv64</code>)</li>
<li>Make</li>
<li>by the way, i will give all resources for free :)</li>
</ul>
<h3><a class="anchor" id="autotoc_md7"></a>
Build and Run</h3>
<ol type="1">
<li>Clone the repository: <code>bash git clone <a href="https://github.com/tomlay0520/SuepOS.git">https://github.com/tomlay0520/SuepOS.git</a> cd SuepOS </code></li>
<li>Build the kernel: <code>bash make </code></li>
<li>Run SuepOS on QEMU: <code>bash make run </code> Press <code>Ctrl+A</code> then <code>X</code> to exit QEMU.</li>
<li>Clean all your target files: <code>bash make clean </code></li>
</ol>
<h2><a class="anchor" id="autotoc_md8"></a>
Project Structure</h2>
<div class="fragment"><div class="line">os/</div>
<div class="line">├── kernel      </div>
<div class="line">│   ├── kernel.o/          </div>
<div class="line">│   ├── os.bin/       </div>
<div class="line">│   ├── os.elf/ </div>
<div class="line">|   └── start.o/      </div>
<div class="line">├── kernel.c </div>
<div class="line">├── platform.h</div>
<div class="line">├── qemu_gcc.mk</div>
<div class="line">├── start.S</div>
<div class="line">├── type.h</div>
<div class="line">├── uart0.c</div>
<div class="line">└── Makefile</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md9"></a>
memory layout (kernel):</h2>
<div class="fragment"><div class="line">Memory Layout:</div>
<div class="line">0x80000000 +-----------------+</div>
<div class="line">           |     .text       | TEXT SEGMENT</div>
<div class="line">           +-----------------+</div>
<div class="line">           |    .rodata      | READ-ONLY DATA SEGMENT</div>
<div class="line">           +-----------------+</div>
<div class="line">           |     .data       | DATA SEGMENT</div>
<div class="line">           +-----------------+</div>
<div class="line">           |      .bss       | BSS SEGMENT AUTO-INITIALIZED TO ZERO</div>
<div class="line">           +-----------------+</div>
<div class="line">           |      heap       | DYNAMIC MEMORY ALLOCATION</div>
<div class="line">           |                 | </div>
<div class="line">           +-----------------+</div>
<div class="line">           |  available RAM  | FREE FOR OTHER USES</div>
<div class="line">0x84000000 +-----------------+  (0x80000000 + 64MB)</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md10"></a>
Whole Main Memory Layout</h2>
<div class="fragment"><div class="line">0x00000000 --&gt; +-----------+</div>
<div class="line">               |   BIOS    |</div>
<div class="line">0x00001000 --&gt; +-----------+</div>
<div class="line">               | boot code |</div>
<div class="line">0x02000000 --&gt; +-----------+</div>
<div class="line">               |   CLINT   |</div>
<div class="line">0x0C000000 --&gt; +-----------+</div>
<div class="line">               |   PLIC    |</div>
<div class="line">0x10000000 --&gt; +-----------+</div>
<div class="line">               |   UART0   |</div>
<div class="line">0x10001000 --&gt; +-----------+</div>
<div class="line">               |  VIRTIO0  |</div>
<div class="line">0x80000000 --&gt; +-----------+</div>
<div class="line">               |           |</div>
<div class="line">               |  KERNEL   |</div>
<div class="line">               |           |</div>
<div class="line">0x84000000 --&gt; +-----------+</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md11"></a>
References &amp; Further Reading</h2>
<ul>
<li><b>The RISC-V Instruction Set Manual</b><ul>
<li>Volume I: Unprivileged ISA (<a href="https://riscv.org/technical/specifications/">https://riscv.org/technical/specifications/</a>)</li>
<li>Volume II: Privileged ISA (<a href="https://riscv.org/technical/specifications/">https://riscv.org/technical/specifications/</a>)</li>
</ul>
</li>
<li><b>RISC-V Supervisor Binary Interface (SBI) Specification</b><ul>
<li><a href="https://github.com/riscv-non-isa/riscv-sbi-doc">https://github.com/riscv-non-isa/riscv-sbi-doc</a></li>
</ul>
</li>
<li><b>OpenSBI</b>: The RISC-V Supervisor Binary Interface (SBI) firmware implementation.<ul>
<li><a href="https://github.com/riscv-software-src/opensbi">https://github.com/riscv-software-src/opensbi</a></li>
</ul>
</li>
<li><b>QEMU RISC-V <code>virt</code> Machine Documentation</b><ul>
<li><code>qemu-system-riscv64 -machine virt help</code></li>
</ul>
</li>
<li><b>Teaching OS Inspiration</b>:<ul>
<li><b>xv6</b>: A simple Unix-like teaching OS. (<a href="https://pdos.csail.mit.edu/6.828/2022/xv6.html">https://pdos.csail.mit.edu/6.828/2022/xv6.html</a>)</li>
<li><b>rCore-Tutorial</b>: A fantastic OS tutorial in Rust from China. (<a href="https://github.com/rcore-os/rCore-Tutorial">https://github.com/rcore-os/rCore-Tutorial</a>)</li>
<li><b>Berkeley's CS61C &amp; CS162</b>: Great courses on computer architecture and operating systems.</li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="autotoc_md12"></a>
License</h2>
<p>This project is licensed under the MIT License - see the LICENSE file for details.</p>
<hr  />
<h1><a class="anchor" id="autotoc_md14"></a>
SuepOS (上海电力大学操作系统)</h1>
<p>一个为 RISC-V 架构设计的简单、用于教学的操作系统，由上海电力大学（SUEP）开发。其目标是通过简洁易读的代码和动手实践，帮助学生理解操作系统的核心概念，如启动流程、特权级、异常处理、内存管理和抢占式多任务。</p>
<p><b>架构</b>: RISC-V 64 (RV64GC) <b>平台</b>: QEMU <code>virt</code> 虚拟机 <b>状态</b>: 开发中 (教学使用)</p>
<h2><a class="anchor" id="autotoc_md15"></a>
已实现功能</h2>
<ul>
<li><b>引导程序</b>: 使用 OpenSBI 作为固件，将系统引导至 S 模式（监管者模式）。</li>
<li><b>内存管理</b>: 实现简单的基于页表的虚拟内存系统。</li>
<li><b>异常与中断处理</b>: 在 S 模式下处理异常和时钟中断。</li>
<li><b>多任务处理</b>: 一个极简的抢占式调度器，采用简单的时间片轮转策略。</li>
<li><b>系统调用</b>: 基础的系统调用接口（例如，使用 <code>sbi_console_putchar</code> 进行输出）。</li>
<li><b>教学重点</b>: 代码包含大量注释，采用模块化设计，清晰度优先于性能。</li>
</ul>
<h2><a class="anchor" id="autotoc_md16"></a>
快速开始</h2>
<h3><a class="anchor" id="autotoc_md17"></a>
前提条件</h3>
<ul>
<li>RISC-V 64 位 GCC 工具链 (例如 <code>riscv64-unknown-elf-gcc</code>)</li>
<li>支持 RISC-V 的 QEMU 系统模拟器 (例如 <code>qemu-system-riscv64</code>)</li>
<li>Make 构建工具</li>
<li>另外，我将免费提供所有资源 :)</li>
</ul>
<h3><a class="anchor" id="autotoc_md18"></a>
构建和运行</h3>
<ol type="1">
<li>克隆代码库: <code>bash git clone <a href="https://github.com/tomlay0520/SuepOS.git">https://github.com/tomlay0520/SuepOS.git</a> cd SuepOS </code></li>
<li>编译内核: <code>bash make </code></li>
<li>在 QEMU 中运行 SuepOS: <code>bash make run </code> 按下 <code>Ctrl+A</code> 然后按 <code>X</code> 来退出 QEMU。</li>
<li>清理所有目标文件: <code>bash make clean </code></li>
</ol>
<h2><a class="anchor" id="autotoc_md19"></a>
项目结构</h2>
<div class="fragment"><div class="line">os/</div>
<div class="line">├── kernel      </div>
<div class="line">│   ├── kernel.o/          </div>
<div class="line">│   ├── os.bin/       </div>
<div class="line">│   ├── os.elf/ </div>
<div class="line">│   └── start.o/      </div>
<div class="line">├── kernel.c </div>
<div class="line">├── platform.h</div>
<div class="line">├── qemu_gcc.mk</div>
<div class="line">├── start.S</div>
<div class="line">├── type.h</div>
<div class="line">├── uart0.c</div>
<div class="line">└── Makefile</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md20"></a>
内存映射 （内核）</h2>
<div class="fragment"><div class="line">内存布局:</div>
<div class="line"> 0x80000000 +-----------------+</div>
<div class="line">            |     .text       | TEXT SEGMENT</div>
<div class="line">            +-----------------+</div>
<div class="line">            |    .rodata      | READ-ONLY DATA SEGMENT</div>
<div class="line">            +-----------------+</div>
<div class="line">            |     .data       | DATA SEGMENT</div>
<div class="line">            +-----------------+</div>
<div class="line">            |      .bss       | BSS SEGMENT AUTO-INITIALIZED TO ZERO</div>
<div class="line">            +-----------------+</div>
<div class="line">            |      heap       | DYNAMIC MEMORY ALLOCATION</div>
<div class="line">            |                 | </div>
<div class="line">            +-----------------+</div>
<div class="line">            |  available RAM  | FREE FOR OTHER USES</div>
<div class="line"> 0x84000000 +-----------------+  (0x80000000 + 64MB)</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md21"></a>
完整的内存映射</h2>
<div class="fragment"><div class="line">0x00000000 --&gt; +-----------+</div>
<div class="line">               |   BIOS    |</div>
<div class="line">0x00001000 --&gt; +-----------+</div>
<div class="line">               | boot code |</div>
<div class="line">0x02000000 --&gt; +-----------+</div>
<div class="line">               |   CLINT   |</div>
<div class="line">0x0C000000 --&gt; +-----------+</div>
<div class="line">               |   PLIC    |</div>
<div class="line">0x10000000 --&gt; +-----------+</div>
<div class="line">               |   UART0   |</div>
<div class="line">0x10001000 --&gt; +-----------+</div>
<div class="line">               |  VIRTIO0  |</div>
<div class="line">0x80000000 --&gt; +-----------+</div>
<div class="line">               |           |</div>
<div class="line">               |  KERNEL   |</div>
<div class="line">               |           |</div>
<div class="line">0x84000000 --&gt; +-----------+</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md22"></a>
参考资料与延伸阅读</h2>
<ul>
<li><b>《RISC-V 指令集手册》</b><ul>
<li>第一卷：非特权级 ISA (<a href="https://riscv.org/technical/specifications/">https://riscv.org/technical/specifications/</a>)</li>
<li>第二卷：特权级 ISA (<a href="https://riscv.org/technical/specifications/">https://riscv.org/technical/specifications/</a>)</li>
</ul>
</li>
<li><b>《RISC-V 监管者二进制接口 (SBI) 规范》</b><ul>
<li><a href="https://github.com/riscv-non-isa/riscv-sbi-doc">https://github.com/riscv-non-isa/riscv-sbi-doc</a></li>
</ul>
</li>
<li><b>OpenSBI</b>: RISC-V SBI 规范的一个实现<ul>
<li><a href="https://github.com/riscv-software-src/opensbi">https://github.com/riscv-software-src/opensbi</a></li>
</ul>
</li>
<li><b>QEMU RISC-V <code>virt</code> 虚拟机文档</b><ul>
<li><code>qemu-system-riscv64 -machine virt help</code></li>
</ul>
</li>
<li><b>教学操作系统灵感来源</b>:<ul>
<li><b>xv6</b>: 一个简单的类 Unix 教学操作系统。(<a href="https://pdos.csail.mit.edu/6.828/2022/xv6.html">https://pdos.csail.mit.edu/6.828/2022/xv6.html</a>)</li>
<li><b>rCore-Tutorial</b>: 一个优秀的来自中国的 Rust 语言操作系统教程。(<a href="https://github.com/rcore-os/rCore-Tutorial">https://github.com/rcore-os/rCore-Tutorial</a>)</li>
<li><b>Berkeley 的 CS61C 和 CS162 课程</b>: 关于计算机体系结构和操作系统的优秀课程。</li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="autotoc_md23"></a>
许可证</h2>
<p>本项目基于 MIT 许可证，详情请查看 LICENSE 文件。 </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
